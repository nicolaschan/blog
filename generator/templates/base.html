<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <script>
        var t = localStorage.getItem('theme');
        if (t) document.documentElement.setAttribute('data-theme', t);
    </script>
    <title>{% block title %}{{ site.name }}{% endblock %}</title>
    <meta name="description" content="{% block description %}{{ site.description }}{% endblock %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Cascadia+Code:wght@400;600&display=swap">
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Cascadia+Code:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    {% include "styles.html" %}
</head>

<body class="{% block body_class %}{% endblock %}">
    <div class="container">
        {% block header %}{% endblock %}

        <main>
            {% block content %}{% endblock %}
        </main>
    </div>
    {% include "font_script.html" %}
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        crossorigin="anonymous"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"></script>
    <script>
        function copyToClipboard(text, btn) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(function () {
                    btn.classList.add('copied');
                    setTimeout(function () { btn.classList.remove('copied'); }, 2000);
                }).catch(function () { fallbackCopy(text, btn); });
            } else {
                fallbackCopy(text, btn);
            }
        }
        function fallbackCopy(text, btn) {
            var textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.setAttribute('readonly', '');
            textarea.style.cssText = 'position:absolute;left:-9999px;top:' + window.pageYOffset + 'px';
            document.body.appendChild(textarea);
            textarea.select();
            textarea.setSelectionRange(0, 99999);
            try {
                document.execCommand('copy');
                btn.classList.add('copied');
                setTimeout(function () { btn.classList.remove('copied'); }, 2000);
            } catch (e) { }
            document.body.removeChild(textarea);
        }
        document.addEventListener('click', function (e) {
            var btn = e.target.closest('.code-block-copy');
            if (!btn) return;
            e.preventDefault();
            e.stopPropagation();
            var block = btn.closest('.code-block');
            var code = block.querySelector('code');
            if (!code) return;
            copyToClipboard(code.textContent.trim(), btn);
        });
    </script>
</body>

</html>